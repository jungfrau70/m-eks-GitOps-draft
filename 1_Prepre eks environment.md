Prerequistes:
- Login with IAM user
- Create Cloud9(=Cloud IDE) WorkStation, Expand EC2 Volume (10->200 GB), Restart EC2

References:
- https://www.eksworkshop.com/010_introduction/
- https://www.eksworkshop.com/020_prerequisites/

export WORKDIR='/home/ec2-user/workshop/'
cd $WORKDIR


#########################################################################################
# 1. Install k8s tools
#########################################################################################

. eks/install-k8s-tools.sh

  
#########################################################################################
# 2. Install awscli version 2
#########################################################################################

. eks/upgrade-awscli.sh

aws --version

#########################################################################################
# 3. (Cloud9 WebUI) Update IAM Settings for Cloud9
#########################################################################################

. eks/update-IAM-settings.sh


#########################################################################################
# 4. Create a CMK for the EKS cluster to use when encrypting your Kubernetes secrets
#########################################################################################

. eks/create-aws-kms-cmk.sh


#########################################################################################
# 5. Install eksctl
#########################################################################################

. eks/install-eksctl.sh


#########################################################################################
# 6. Install Helm Client
#########################################################################################

. eks/install-helm.sh



<!--#########################################################################################-->
<!--# 10. Create key pair for EC2-->
<!--#########################################################################################-->

<!--. config/create-ec2-key-pair.sh-->


<!--#########################################################################################-->
<!--# 11. Update IAM Settings for Cloud9-->
<!--#########################################################################################-->

<!--bash config/create-kms-alias.sh-->




<!--#########################################################################################-->
<!--# 2. Install Anaconda-->
<!--#########################################################################################-->

<!--bash config/install-conda.sh-->

<!--## Exit current terminal-->
<!--^D-->

<!--## Open new terminal-->

<!--#########################################################################################-->
<!--# 3. Create Virtual Environment-->
<!--#########################################################################################-->

<!--## Create virtual env - eksAdmin-->

<!--conda env create -f environment.yml-->

<!--conda env list-->
<!--# conda environments:-->
<!--#-->
<!--eksAdmin                 /home/ec2-user/.conda/envs/eksAdmin-->
<!--base                  *  /opt/conda-->

<!--#conda remove --name eksAdmin --all-->

<!--conda activate eksAdmin-->


<!--pip --version-->

<!--# Upgrade pip-->
<!--pip install --upgrade pip-->



#########################################################################################
# 9. (eksAdmin) Install aws-iam-authenticator
#########################################################################################

#bash config/install-aws-iam-authenticator.sh